(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{169:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("最初的想法很简单：没有学会一门脚本语言的程序员不是好程序员。带这个这个想法我选择了 Python，在看了点《Python 核心编程》后就想能不能找个开源项目边做边学，现在开源项目这么火爆，我也去尝尝鲜。于是我发现了 Django。认识了 Django 后，我突然发现架一个个人网站的梦想貌似有希望了（毕业后从事 MFC 的工作，对 Web 的世界不是很了解/(ㄒ o ㄒ)/~~）。")]),t._v(" "),s("p",[t._v("于是我的个人主页就诞生了："),s("a",{attrs:{href:"http://aquariushome.duapp.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://aquariushome.duapp.com/"),s("OutboundLink")],1),t._v("\n在写这个主页的时候一直想写一些有关 Django 的东西，记录自己的所学。可发现自己的语言组织能力差，对 Django 的了解也不够深。不知不觉，网址写完了，可文章确没有。感觉还是写点东西吧，巩固一下，加深理解，记下来怕以后忘了。\n但已经不知道从何写起，于是乎干脆去翻译官方文档。Django book 貌似很久没更新的样子，英语能力不怎么好，就不一一翻译，按自己的理解做一些记录。\n啰嗦完毕~~")]),t._v(" "),s("p",[t._v("官方原文："),s("a",{attrs:{href:"https://docs.djangoproject.com/en/1.8/intro/overview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.djangoproject.com/en/1.8/intro/overview/"),s("OutboundLink")],1)]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("Django 是从快节奏的新闻编辑部环境中开发出来的，所以它很适合用于搭建通用的 Web 引用。这里我们来研究下如何使用 Django 编写一个数据库驱动的 Web 应用。\n这份文档不是 Django 的教程，只是大体的介绍 Django 是怎么运作的。")]),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("Django 使用了数据对象映射器，让你通过 Python 代码来设计和操作数据库。\nDjango 数据模型的语法提供了丰富的方法来展现你的模型，这解决了多年以来数据模式问题。我们来看一个简单的例子：")]),t._v(" "),s("p",[t._v("mysite/news/models.py")]),t._v(" "),t._m(4),t._m(5),t._v(" "),s("p",[t._v("接下来，使用运行 Django 的使用工具命令来自动的创建数据库表。")]),t._v(" "),t._m(6),s("p",[t._v("migrate 命令会扫描所有有效的 model，并根据选项创建数据库表。")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("Django 提供丰富的 Python API 来访问数据。")]),t._v(" "),t._m(8),t._m(9),t._v(" "),s("p",[t._v("当你模型定义好后， Django 会自动的创建一个专业的后台管理接口 ---- 一个 Web 站点，通过认证的用户可以在站点上增加、修改、删除对象。注册你的模型到管理站点很简单：")]),t._v(" "),s("p",[t._v("mysite/news/models.py")]),t._v(" "),t._m(10),s("p",[t._v("这里的哲学思想是：不通过人工的创建后台管理接口，就能让你的员工或用户编辑站点。一个典型的创建 Django 应用的流程是，创建模型，注册管理站点，快速的录入数据，发布数据。")]),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("一个优雅的 URL 方案设计对一个高质量的 Web 应用来说是很重要的。Django 鼓励漂亮简洁的 URL 设计，不会有任何像 .php 或 .asp 这样令人讨厌的东西在 URL 里。\n创建一个 URL 配置模块，配置模块包含一个 URL 模式（正则表达式的模式）和 Python 回调函数的映射表。URL 配置达到了解耦的目的。\n接下来我们来看下例子：")]),t._v(" "),s("p",[t._v("mysite/news/urls.py")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),s("p",[t._v("每一个 view 负责返回包含了请求返回内容的 HttpRespnse 对象，或者是引发异常，如 Http404.\n通常 view 通过参数查询数据，加载模板，渲染模板然后返回请求。看下面例子：")]),t._v(" "),s("p",[t._v("mysite/news/views.py")]),t._v(" "),t._m(15),t._m(16),t._v(" "),s("p",[t._v("上面的代码加载了 news/year_archive.html 模板。\nDjango 有一个模板搜索路径，在你的 Django settings 中指定了模板搜索路径列表，Django 依次搜搜这个列表中的路径，直到找到模板。\n我们来看下 news/year_archicve.html 模板的定义：")]),t._v(" "),s("p",[t._v("mysite/news/templates/news/year_archive.html")]),t._v(" "),t._m(17),t._m(18),t._v(" "),s("p",[t._v("mysite/template/base.html")]),t._v(" "),t._m(19),s("p",[t._v("简单的理解，父模板定义了一些位置，方便在模板继承的时候重新设计这些预留的位置。他可以用于创建多个版本的站点，比如你要为移动端创建一个站点版本，使用这项技术可以轻松的实现。\nDjango 模板系统只是 Django 系统中的一部分，Django 系统的耦合性很低，如果你有更合适你的系统，你可以不使用 Django 的模板系统。同样，Dajngo 的 datase API，也可以单独使用后不使用。Django 的 model, views, templates 是互相解耦的三个系统模块。")])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"初识-django"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初识-django","aria-hidden":"true"}},[this._v("#")]),this._v(" 初识 Django")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"引言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引言","aria-hidden":"true"}},[this._v("#")]),this._v(" 引言")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"初始-django"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始-django","aria-hidden":"true"}},[this._v("#")]),this._v(" 初始 Django")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"设计你的-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计你的-model","aria-hidden":"true"}},[this._v("#")]),this._v(" 设计你的 model")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Reporter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  full_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("70")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__str__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## __unicode__ on python 2")]),t._v("\n    retrun self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("full_name\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Article")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  pub_date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  headline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  content "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  reporter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reporter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__str__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## __unicode__ on python 2")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headline\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"写入数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写入数据库","aria-hidden":"true"}},[this._v("#")]),this._v(" 写入数据库")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("python manage.py migrate\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[this._v("#")]),this._v(" API")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("# 导入 models 模块\n>>> from news.models import Reporter, Article\n\n# 数据库中还没有数据\n>>> Reporter.objects.all()\n[]\n\n# 常见一个 Reporter\n>>> r = Reporter(full_name='John Smith')\n\n# 显示的调用 save() 方法，保存到数据库\n>>> r.save()\n\n# 现在他就有 ID 了\n>>> r.id\n1\n\n# 已经保存到数据库\n>>> Reporter.objecs.all()\n[<Reporter: John Smith>]\n\n# 数据库字段在 Python 中表现为对象属性\n>>> r.full_name\n'John Smith'\n\n# Django 提供了丰富的方式访问数据库\n>>> Reporter.objects.get(id=1)\n<Reporter: John Smith>\n>>> Report.objects.get(full_name__startswith='John')\n<Reporter: John Smith>\n>>> Report.objects.get(full_name_contains='mith')\n<Reporter: John Smith>\n>>> Report.objects.get(id=2)\nTraceback(most recent call last):\n...\nDoesNotExist: Reporter matching query does not exist.\n\n# 创建一个 article\n>>> from datetime import date\n>>> a = Article(pub_date=date.today(), headline='Django is cool',\n...     content='Yeah.', reporter=r)\n>>> a.save()\n\n# 查看 article\n>>> Article.objects.all()\n[<Article: Django is cool>]\n\n# Article 对象通过 API 访问与其关联的 Reporter 对象\n>>> r = a.reporter\n>>> r.full_name\n'John Smith'\n\n# 反过来：Reporter 对象通过 API 反问 Article 对象\n>>> r.article_set.all()\n[<Article: Django is cool>]\n\n# API 在幕后执行者你需要的关系查询，下面是要查询名字以 John 开头的 Reporter 的所有文章\n>>> Article.objects.filter(reporter__full_name_startswith='John')\n[<Article: Django is cool>]\n\n# 通过修改属性和调用保存方法来改变一个对象\n>>> r.full_name = 'Billy Goat'\n>>> r.save()\n\n# 调用 delete() 方法来删除一个对象\n>>> r.delete()\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"动态管理接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态管理接口","aria-hidden":"true"}},[this._v("#")]),this._v(" 动态管理接口")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" Django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Article")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  pub_date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  headline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_legth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  content "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  reprter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reporter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\nmysite"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("news"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" admin\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\nadmin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("site"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Article"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"设计-urls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计-urls","aria-hidden":"true"}},[this._v("#")]),this._v(" 设计 URLs")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urls "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" url\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" views\nurlpatterns "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'^articles/([0-9]{4})/$'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" views"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("year_archive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'^articles/([0-9]{4})/([0-9]{2})/$'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" views"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("moth_archive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" views"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("article_detail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("以上代码中， 通过正则表达式映射 URL 到 views 中的回调函数。当用户请求页面时，正则表达式通过括号捕获到 URL 中的值。Django 一次匹配正则表达式，匹配到则返回，如果没有匹配到则返回 404 错误页，这个过程是很迅速的，因为在加载时正则表达式已经编译过了。\n正则表达式一旦匹配， Django 便导入指定的 view 模块，并调用 指定的 view 中的函数，通过正则表达式捕获到参数传递参数。\n例如，如果一个用过的请求 URL 是 “/articles/2005/05/39323”, Django 将会调用函数 "),a("code",[this._v("news.views.article_detail(request, '2005', '05', '39323')")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"编写你的-views"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写你的-views","aria-hidden":"true"}},[this._v("#")]),this._v(" 编写你的 views")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shortcuts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" render\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("year_archive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  a_list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Article"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pub_date__year"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  context "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'year'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("year"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'article_list'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("a_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" render"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'news/year_archive.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"设计你的模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计你的模板","aria-hidden":"true"}},[this._v("#")]),this._v(" 设计你的模板")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v('{% extends "base.html" %} {% block title %}Articles for {{ year }}{% endblock %}\n{% block content %}\n'),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Articles for {{ year }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n{% for article in article_list %}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ article.headline }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("By {{ article.reporter.full_name }}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('Published {{ article.pub_date|date:"F j, Y" }}'),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n{% endfor %} {% endblock %}\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{pre:!0},[a("p",[this._v("被两个花括号包围的变量 "),a("code",[this._v("{{ article.headline }}")]),this._v(" 表示输出 article 的 headline 属性。点号不仅表示引用属性，也可以是字典或是函数调用。\n"),a("code",[this._v('{{ article.pub_date|date:"F j, Y"}}')]),this._v(" 使用了 Unix 风格的管道符 “|”。在 Django 中这叫过滤器，它提供了过滤变量的方法。在这个例子中，时间变量被按照 Python 给的格式输出。\n你可以把多个过滤器连接在一起，还可以自定义过滤器，可以自定义模板标签和背后运行的 Python 代码。\n最后，Django 使用了模板继承的概念。标签 "),a("code",[this._v('{% extends "base.html" %}')]),this._v(" 表示首先加载名为 base.html 的模板， base.html 模板有一堆的 blocks 标签组成。这样大大减少了模板的冗余度。\n我们来看一下 base.html 模板的定义：")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("{% load staticfiles %}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{% block title %}{% endblock %}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n    <img src="{% static "images/sitelogo.png" %}" alt="Logo" /> {% block content\n    %}{% endblock %}\n  '),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])}],!1,null,null,null);a.default=e.exports}}]);