<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>初识 Django | Ravenq 的技术博客</title>
    <meta name="description" content="Ravenq 的技术博客文章在Github的备份，博客请访问 http://www.aqcoder.com">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script src="/baidu-tongji.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.4e1e9e1f.css" as="style"><link rel="preload" href="/assets/js/app.db192b6a.js" as="script"><link rel="preload" href="/assets/js/30.0ae492da.js" as="script"><link rel="prefetch" href="/assets/js/10.6bbf330d.js"><link rel="prefetch" href="/assets/js/11.7b431829.js"><link rel="prefetch" href="/assets/js/12.7805ddf2.js"><link rel="prefetch" href="/assets/js/13.8d105ae6.js"><link rel="prefetch" href="/assets/js/14.a115bb88.js"><link rel="prefetch" href="/assets/js/15.3531b125.js"><link rel="prefetch" href="/assets/js/16.1393f69e.js"><link rel="prefetch" href="/assets/js/17.54dd4da6.js"><link rel="prefetch" href="/assets/js/18.1edf52d2.js"><link rel="prefetch" href="/assets/js/19.8e36ee08.js"><link rel="prefetch" href="/assets/js/2.457859b5.js"><link rel="prefetch" href="/assets/js/20.3f03f694.js"><link rel="prefetch" href="/assets/js/21.7ee31d84.js"><link rel="prefetch" href="/assets/js/22.706993f8.js"><link rel="prefetch" href="/assets/js/23.f5426836.js"><link rel="prefetch" href="/assets/js/24.962bad8e.js"><link rel="prefetch" href="/assets/js/25.6c8fb24b.js"><link rel="prefetch" href="/assets/js/26.5b01caa3.js"><link rel="prefetch" href="/assets/js/27.9e499f2a.js"><link rel="prefetch" href="/assets/js/28.653cdca3.js"><link rel="prefetch" href="/assets/js/29.6ca3d193.js"><link rel="prefetch" href="/assets/js/3.363fb11d.js"><link rel="prefetch" href="/assets/js/31.d40380d3.js"><link rel="prefetch" href="/assets/js/32.4ebc934b.js"><link rel="prefetch" href="/assets/js/33.037ebe45.js"><link rel="prefetch" href="/assets/js/34.e09806a4.js"><link rel="prefetch" href="/assets/js/35.bcdeb8c8.js"><link rel="prefetch" href="/assets/js/36.909cde7b.js"><link rel="prefetch" href="/assets/js/37.0ac130bf.js"><link rel="prefetch" href="/assets/js/38.a305117c.js"><link rel="prefetch" href="/assets/js/39.1798f613.js"><link rel="prefetch" href="/assets/js/4.5f4fb181.js"><link rel="prefetch" href="/assets/js/40.f7f70571.js"><link rel="prefetch" href="/assets/js/41.2f17aa03.js"><link rel="prefetch" href="/assets/js/42.29839086.js"><link rel="prefetch" href="/assets/js/43.ada4255a.js"><link rel="prefetch" href="/assets/js/5.d40bee43.js"><link rel="prefetch" href="/assets/js/6.bb5c5ed8.js"><link rel="prefetch" href="/assets/js/7.a6b4795e.js"><link rel="prefetch" href="/assets/js/8.d2ac8ddd.js"><link rel="prefetch" href="/assets/js/9.71b77ad3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4e1e9e1f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ravenq 的技术博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.aqcoder.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/markdown-it-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown-it-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/vue-cli-plugin-component-lib" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-cli-plugin-component-lib
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>GVF Project</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-server
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-admin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.github.com/ravenq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.aqcoder.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开源项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/markdown-it-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown-it-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/vue-cli-plugin-component-lib" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-cli-plugin-component-lib
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>GVF Project</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-server
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-admin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.github.com/ravenq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>初识 Django</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog.md/4.html#引言" class="sidebar-link">引言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#初始-django" class="sidebar-link">初始 Django</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#设计你的-model" class="sidebar-link">设计你的 model</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#写入数据库" class="sidebar-link">写入数据库</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#api" class="sidebar-link">API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#动态管理接口" class="sidebar-link">动态管理接口</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#设计-urls" class="sidebar-link">设计 URLs</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#编写你的-views" class="sidebar-link">编写你的 views</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/4.html#设计你的模板" class="sidebar-link">设计你的模板</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="初识-django"><a href="#初识-django" aria-hidden="true" class="header-anchor">#</a> 初识 Django</h1> <h2 id="引言"><a href="#引言" aria-hidden="true" class="header-anchor">#</a> 引言</h2> <p>最初的想法很简单：没有学会一门脚本语言的程序员不是好程序员。带这个这个想法我选择了 Python，在看了点《Python 核心编程》后就想能不能找个开源项目边做边学，现在开源项目这么火爆，我也去尝尝鲜。于是我发现了 Django。认识了 Django 后，我突然发现架一个个人网站的梦想貌似有希望了（毕业后从事 MFC 的工作，对 Web 的世界不是很了解/(ㄒ o ㄒ)/~~）。</p> <p>于是我的个人主页就诞生了：<a href="http://aquariushome.duapp.com/" target="_blank" rel="noopener noreferrer">http://aquariushome.duapp.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
在写这个主页的时候一直想写一些有关 Django 的东西，记录自己的所学。可发现自己的语言组织能力差，对 Django 的了解也不够深。不知不觉，网址写完了，可文章确没有。感觉还是写点东西吧，巩固一下，加深理解，记下来怕以后忘了。
但已经不知道从何写起，于是乎干脆去翻译官方文档。Django book 貌似很久没更新的样子，英语能力不怎么好，就不一一翻译，按自己的理解做一些记录。
啰嗦完毕~~</p> <p>官方原文：<a href="https://docs.djangoproject.com/en/1.8/intro/overview/" target="_blank" rel="noopener noreferrer">https://docs.djangoproject.com/en/1.8/intro/overview/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="初始-django"><a href="#初始-django" aria-hidden="true" class="header-anchor">#</a> 初始 Django</h2> <p>Django 是从快节奏的新闻编辑部环境中开发出来的，所以它很适合用于搭建通用的 Web 引用。这里我们来研究下如何使用 Django 编写一个数据库驱动的 Web 应用。
这份文档不是 Django 的教程，只是大体的介绍 Django 是怎么运作的。</p> <h2 id="设计你的-model"><a href="#设计你的-model" aria-hidden="true" class="header-anchor">#</a> 设计你的 model</h2> <p>Django 使用了数据对象映射器，让你通过 Python 代码来设计和操作数据库。
Django 数据模型的语法提供了丰富的方法来展现你的模型，这解决了多年以来数据模式问题。我们来看一个简单的例子：</p> <p>mysite/news/models.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models
<span class="token keyword">class</span> <span class="token class-name">Reporter</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
  full_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">## __unicode__ on python 2</span>
    retrun self<span class="token punctuation">.</span>full_name

<span class="token keyword">class</span> <span class="token class-name">Article</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
  pub_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span>
  headline <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
  content <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>
  reporter <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Reporter<span class="token punctuation">)</span>
  <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">## __unicode__ on python 2</span>
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>headline
</code></pre></div><h2 id="写入数据库"><a href="#写入数据库" aria-hidden="true" class="header-anchor">#</a> 写入数据库</h2> <p>接下来，使用运行 Django 的使用工具命令来自动的创建数据库表。</p> <div class="language-shell extra-class"><pre class="language-text"><code>python manage.py migrate
</code></pre></div><p>migrate 命令会扫描所有有效的 model，并根据选项创建数据库表。</p> <h2 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> API</h2> <p>Django 提供丰富的 Python API 来访问数据。</p> <div class="language-shell extra-class"><pre class="language-text"><code># 导入 models 模块
&gt;&gt;&gt; from news.models import Reporter, Article

# 数据库中还没有数据
&gt;&gt;&gt; Reporter.objects.all()
[]

# 常见一个 Reporter
&gt;&gt;&gt; r = Reporter(full_name='John Smith')

# 显示的调用 save() 方法，保存到数据库
&gt;&gt;&gt; r.save()

# 现在他就有 ID 了
&gt;&gt;&gt; r.id
1

# 已经保存到数据库
&gt;&gt;&gt; Reporter.objecs.all()
[&lt;Reporter: John Smith&gt;]

# 数据库字段在 Python 中表现为对象属性
&gt;&gt;&gt; r.full_name
'John Smith'

# Django 提供了丰富的方式访问数据库
&gt;&gt;&gt; Reporter.objects.get(id=1)
&lt;Reporter: John Smith&gt;
&gt;&gt;&gt; Report.objects.get(full_name__startswith='John')
&lt;Reporter: John Smith&gt;
&gt;&gt;&gt; Report.objects.get(full_name_contains='mith')
&lt;Reporter: John Smith&gt;
&gt;&gt;&gt; Report.objects.get(id=2)
Traceback(most recent call last):
...
DoesNotExist: Reporter matching query does not exist.

# 创建一个 article
&gt;&gt;&gt; from datetime import date
&gt;&gt;&gt; a = Article(pub_date=date.today(), headline='Django is cool',
...     content='Yeah.', reporter=r)
&gt;&gt;&gt; a.save()

# 查看 article
&gt;&gt;&gt; Article.objects.all()
[&lt;Article: Django is cool&gt;]

# Article 对象通过 API 访问与其关联的 Reporter 对象
&gt;&gt;&gt; r = a.reporter
&gt;&gt;&gt; r.full_name
'John Smith'

# 反过来：Reporter 对象通过 API 反问 Article 对象
&gt;&gt;&gt; r.article_set.all()
[&lt;Article: Django is cool&gt;]

# API 在幕后执行者你需要的关系查询，下面是要查询名字以 John 开头的 Reporter 的所有文章
&gt;&gt;&gt; Article.objects.filter(reporter__full_name_startswith='John')
[&lt;Article: Django is cool&gt;]

# 通过修改属性和调用保存方法来改变一个对象
&gt;&gt;&gt; r.full_name = 'Billy Goat'
&gt;&gt;&gt; r.save()

# 调用 delete() 方法来删除一个对象
&gt;&gt;&gt; r.delete()
</code></pre></div><h2 id="动态管理接口"><a href="#动态管理接口" aria-hidden="true" class="header-anchor">#</a> 动态管理接口</h2> <p>当你模型定义好后， Django 会自动的创建一个专业的后台管理接口 ---- 一个 Web 站点，通过认证的用户可以在站点上增加、修改、删除对象。注册你的模型到管理站点很简单：</p> <p>mysite/news/models.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> Django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models
<span class="token keyword">class</span> <span class="token class-name">Article</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
  pub_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token punctuation">)</span>
  headline <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_legth<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
  content <span class="token operator">=</span> models<span class="token punctuation">.</span>TextField<span class="token punctuation">(</span><span class="token punctuation">)</span>
  reprter <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Reporter<span class="token punctuation">)</span>


mysite<span class="token operator">/</span>news<span class="token operator">/</span>admin<span class="token punctuation">.</span>py

<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> models
admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>register<span class="token punctuation">(</span>models<span class="token punctuation">.</span>Article<span class="token punctuation">)</span>
</code></pre></div><p>这里的哲学思想是：不通过人工的创建后台管理接口，就能让你的员工或用户编辑站点。一个典型的创建 Django 应用的流程是，创建模型，注册管理站点，快速的录入数据，发布数据。</p> <h2 id="设计-urls"><a href="#设计-urls" aria-hidden="true" class="header-anchor">#</a> 设计 URLs</h2> <p>一个优雅的 URL 方案设计对一个高质量的 Web 应用来说是很重要的。Django 鼓励漂亮简洁的 URL 设计，不会有任何像 .php 或 .asp 这样令人讨厌的东西在 URL 里。
创建一个 URL 配置模块，配置模块包含一个 URL 模式（正则表达式的模式）和 Python 回调函数的映射表。URL 配置达到了解耦的目的。
接下来我们来看下例子：</p> <p>mysite/news/urls.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
  url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
  url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>moth_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
  url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>以上代码中， 通过正则表达式映射 URL 到 views 中的回调函数。当用户请求页面时，正则表达式通过括号捕获到 URL 中的值。Django 一次匹配正则表达式，匹配到则返回，如果没有匹配到则返回 404 错误页，这个过程是很迅速的，因为在加载时正则表达式已经编译过了。
正则表达式一旦匹配， Django 便导入指定的 view 模块，并调用 指定的 view 中的函数，通过正则表达式捕获到参数传递参数。
例如，如果一个用过的请求 URL 是 “/articles/2005/05/39323”, Django 将会调用函数 <code>news.views.article_detail(request, '2005', '05', '39323')</code></p> <h2 id="编写你的-views"><a href="#编写你的-views" aria-hidden="true" class="header-anchor">#</a> 编写你的 views</h2> <p>每一个 view 负责返回包含了请求返回内容的 HttpRespnse 对象，或者是引发异常，如 Http404.
通常 view 通过参数查询数据，加载模板，渲染模板然后返回请求。看下面例子：</p> <p>mysite/news/views.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">def</span> <span class="token function">year_archive</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> year<span class="token punctuation">)</span><span class="token punctuation">:</span>
  a_list <span class="token operator">=</span> Article<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>pub_date__year<span class="token operator">=</span>year<span class="token punctuation">)</span>
  context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'year'</span><span class="token punctuation">:</span>year<span class="token punctuation">,</span> <span class="token string">'article_list'</span><span class="token punctuation">:</span>a_list<span class="token punctuation">}</span>
  <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'news/year_archive.html'</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>
</code></pre></div><h2 id="设计你的模板"><a href="#设计你的模板" aria-hidden="true" class="header-anchor">#</a> 设计你的模板</h2> <p>上面的代码加载了 news/year_archive.html 模板。
Django 有一个模板搜索路径，在你的 Django settings 中指定了模板搜索路径列表，Django 依次搜搜这个列表中的路径，直到找到模板。
我们来看下 news/year_archicve.html 模板的定义：</p> <p>mysite/news/templates/news/year_archive.html</p> <div class="language-html extra-class"><pre class="language-html"><code>{% extends &quot;base.html&quot; %} {% block title %}Articles for {{ year }}{% endblock %}
{% block content %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Articles for {{ year }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

{% for article in article_list %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ article.headline }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>By {{ article.reporter.full_name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Published {{ article.pub_date|date:&quot;F j, Y&quot; }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
{% endfor %} {% endblock %}
</code></pre></div><div><p>被两个花括号包围的变量 <code>{{ article.headline }}</code> 表示输出 article 的 headline 属性。点号不仅表示引用属性，也可以是字典或是函数调用。
<code>{{ article.pub_date|date:&quot;F j, Y&quot;}}</code> 使用了 Unix 风格的管道符 “|”。在 Django 中这叫过滤器，它提供了过滤变量的方法。在这个例子中，时间变量被按照 Python 给的格式输出。
你可以把多个过滤器连接在一起，还可以自定义过滤器，可以自定义模板标签和背后运行的 Python 代码。
最后，Django 使用了模板继承的概念。标签 <code>{% extends &quot;base.html&quot; %}</code> 表示首先加载名为 base.html 的模板， base.html 模板有一堆的 blocks 标签组成。这样大大减少了模板的冗余度。
我们来看一下 base.html 模板的定义：</p></div> <p>mysite/template/base.html</p> <div class="language-html extra-class"><pre class="language-html"><code>{% load staticfiles %}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{% block title %}{% endblock %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    &lt;img src=&quot;{% static &quot;images/sitelogo.png&quot; %}&quot; alt=&quot;Logo&quot; /&gt; {% block content
    %}{% endblock %}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>简单的理解，父模板定义了一些位置，方便在模板继承的时候重新设计这些预留的位置。他可以用于创建多个版本的站点，比如你要为移动端创建一个站点版本，使用这项技术可以轻松的实现。
Django 模板系统只是 Django 系统中的一部分，Django 系统的耦合性很低，如果你有更合适你的系统，你可以不使用 Django 的模板系统。同样，Dajngo 的 datase API，也可以单独使用后不使用。Django 的 model, views, templates 是互相解耦的三个系统模块。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.db192b6a.js" defer></script><script src="/assets/js/30.0ae492da.js" defer></script>
  </body>
</html>
